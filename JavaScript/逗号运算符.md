# 逗号运算符

逗号运算符是二元运算符，它能够先执行运算符左侧的操作数，然后再执行右侧的操作数，最后返回右侧操作数的值。

逗号运算符可以实现连续运算，如多个变量连续赋值。

```JavaScript
var a = 1,b = 2,c = 3,d = 4;
```

等价于

```JavaScript
var a = 1;
var b = 2;
var c = 3;
var d = 4;
```

**与条件运算符、逻辑运算符根据条件来决定是否执行所有或特定操作数不同的是，逗号运算符会执行所有的操作数，但并非返回所有操作数的结果，它只返回最后一个操作数的值。**

在下面代码中，变量 a 的值是逗号运算之后，通过第二个操作数 c=2 的执行结果赋值得到的。第一个操作数的执行结果没有返回，但是这个表达式被执行了。

```JavaScript
a = (b = 1,c = 2);  //连续执行和赋值
console.log(a);  //返回2
console.log(b);  //返回1
console.log(c);  //返回2
```

逗号运算符可以作为仅需执行表达式的工具，这些表达式不需要返回值，但必须要运算。在特定环境中，可以在一个表达式中包含多个子表达式，通过逗号运算符让它们全部执行，而不用返回结果。

for 循环结构的小括号内包含 3 个表达式，第一个表达式为初始化值，第二个表达式为检测条件，第三个表达式为递增表达式。使用逗号运算符可以在 3 个表达式中添加多个额外的计算任务，但要确保第二个表达式的最后一个子表达式返回一个可控布尔值，否则会导致死循环。

```JavaScript
for(var a = 1,b = 10,c = 100;++ c,a < b;a ++,c --){
    console.log(a * c);
}
```

逗号运算符的优先级是最低的。在下面代码中，赋值运算符优先于逗号运算符，也就是说数值 1 被赋值给变量 b 之后，继续赋值给变量 a，最后才执行逗号运算符。

```JavaScript
a = b = 1,c = 2;  //连续执行和赋值
console.log(a);  //返回1
console.log(b);  //返回1
console.log(c);  //返回2
```

更多的示例
```JavaScript
(x = 8 * 2), x * 4 /*整个表达式的值为64，x的值为16*/
((x = 8 * 2), x * 4), x * 2 /*整个表达式的值为32，x的值为16*/
x = ((z = 5), 5 * 2) /*整个表达式为赋值表达式，x的值为10，z的值为5*/
(x = z = 5), 5 * 2 /*整个表达式为逗号表达式，它的值为10，x和z的值都为5*/
```